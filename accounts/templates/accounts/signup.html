{% extends 'accounts/layout.html' %}
{% block title %}User {% endblock %}
{% block content %}
<section>
<div class="section-body">
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-head style-primary">
                    <header>User</header>
                    <div class="tools">
                        <a class="btn btn-icon-toggle btn-collapse"><i class="fa fa-angle-down"></i></a>
                        <a class="btn btn-icon-toggle btn-close"><i class="md md-close"></i></a>
                    </div>
                </div>
                <div class="card-body">
                    <form  class ="form" method="post">{% csrf_token %}
                        {{ form.as_p }}
                        <button type="submit">Sign up</button>
                     </form>
                </div>
	    </div>
	</div>
    </div>
</div>
</section>
 {% block script%}
<script>
    $("#id_username").change(function () {
      var username = $(this).val();

      $.ajax({
        url: '/accounts/ajax/validate_username/',
        data: {
          'username': username
        },
        dataType: 'json',
        success: function (data) {
          if (data.is_taken) {
            alert("A user with this username already exists.");
          }
        }
      });

    });
  </script>
 {% endblock %}
{% endblock %}
